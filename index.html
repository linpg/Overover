<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>çµ‚æ¥µå¯†ç¢¼ - èªéŸ³ç‰ˆ Demo</title>
  <style>
    :root { color-scheme: dark; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 16px;
      background: radial-gradient(circle at top, #1f2937 0, #020617 45%, #000 100%);
      color: #f9fafb;
    }
    h1 {
      font-size: 22px;
      margin: 0 0 12px;
      letter-spacing: 0.08em;
    }
    .card {
      background: rgba(15,23,42,0.96);
      border-radius: 18px;
      padding: 16px 16px 18px;
      margin: 0 auto 16px;
      max-width: 420px;
      box-shadow:
        0 18px 40px rgba(0,0,0,0.55),
        0 0 0 1px rgba(148,163,184,0.14);
      backdrop-filter: blur(18px);
      border: 1px solid rgba(148,163,184,0.25);
    }
    label {
      display: block;
      margin-top: 10px;
      font-size: 13px;
      color: #cbd5f5;
    }
    input[type="number"],
    input[type="text"],
    select {
      width: 100%;
      padding: 10px 12px;
      margin-top: 4px;
      border-radius: 999px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #f9fafb;
      box-sizing: border-box;
      font-size: 14px;
      outline: none;
      transition: border-color 0.15s, box-shadow 0.15s, background 0.2s;
    }
    input:focus,
    select:focus {
      border-color: #60a5fa;
      box-shadow: 0 0 0 1px #60a5fa55;
      background: #020617;
    }
    .flex {
      display: flex;
      gap: 10px;
    }
    .flex > div { flex: 1; }

    button {
      padding: 13px 20px;
      border-radius: 999px;
      border: none;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 14px;
      transition: transform 0.06s ease-out, box-shadow 0.06s, background 0.15s;
      white-space: nowrap;
    }
    button.primary {
      background: linear-gradient(135deg, #2563eb, #38bdf8);
      color: #f9fafb;
      box-shadow: 0 10px 22px rgba(37,99,235,0.55);
      width: 100%;
    }
    button.primary:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 4px 12px rgba(15,23,42,0.7);
    }
    button.secondary {
      background: #4b5563;
      color: #f9fafb;
    }
    button.secondary:active {
      transform: translateY(1px) scale(0.98);
    }
    button.danger {
      background: linear-gradient(135deg, #ef4444, #f97316);
      color: #f9fafb;
      box-shadow: 0 10px 22px rgba(248,113,113,0.55);
    }
    button.danger:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 4px 12px rgba(15,23,42,0.7);
    }
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      box-shadow: none;
    }
    .btn-row {
      display: flex;
      gap: 8px;
      margin-top: 10px;
    }
    .btn-row > * { flex: 1; }

    .status {
      font-size: 13px;
      margin-top: 6px;
      color: #9ca3af;
      min-height: 18px;
    }
    .voice-status {
      margin-top: 10px;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #6b7280;
      flex-shrink: 0;
    }
    .dot.active {
      background: #22c55e;
      box-shadow: 0 0 0 5px rgba(34,197,94,0.33);
      animation: pulse 1s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.25); opacity: 0.7;}
      100% { transform: scale(1); opacity: 1; }
    }
    .transcript-box {
      background: #020617;
      border-radius: 12px;
      padding: 8px 10px;
      min-height: 44px;
      margin-top: 6px;
      font-size: 15px;
      border: 1px dashed #4b5563;
      word-break: break-all;
      line-height: 1.4;
    }
    .transcript-label {
      font-size: 13px;
      color: #a5b4fc;
      margin-top: 8px;
    }
    .range-display {
      font-size: 20px;
      font-weight: 700;
      margin-top: 6px;
    }
    .player-display {
      font-size: 18px;
      margin-top: 4px;
      color: #e5e7eb;
      font-weight: 600;
    }
    .error {
      color: #f87171;
      font-size: 13px;
      margin-top: 4px;
      min-height: 16px;
    }
    .top-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }
    /* çµ‚æ¥µå¯†ç¢¼å¡ç‰Œ */
    .secret-card {
      width: 120px;
      height: 64px;
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,0.4);
      background: radial-gradient(circle at 0 0,#1e293b,#020617);
      position: relative;
      overflow: hidden;
      cursor: pointer;
      box-shadow: 0 8px 18px rgba(15,23,42,0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.16s ease-out, box-shadow 0.16s;
    }
    .secret-card:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 26px rgba(15,23,42,0.95);
    }
    .secret-label {
      position: absolute;
      top: 6px;
      left: 10px;
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: #9ca3af;
    }
    .secret-value {
      font-size: 24px;
      font-weight: 800;
      letter-spacing: 0.08em;
    }
    .secret-covered {
      font-size: 13px;
      color: #e5e7eb;
    }
    .secret-cover-strip {
      position: absolute;
      inset: 0;
      background: repeating-linear-gradient(
        135deg,
        rgba(30,64,175,0.4) 0,
        rgba(30,64,175,0.4) 6px,
        rgba(15,23,42,0.98) 6px,
        rgba(15,23,42,0.98) 12px
      );
      opacity: 0.9;
      pointer-events: none;
      transition: opacity 0.16s;
    }
    .secret-card.revealed .secret-cover-strip {
      opacity: 0;
    }
    .secret-card.revealed .secret-covered {
      opacity: 0;
    }
    /* Boom overlay */
    .boom-overlay {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease-out;
      z-index: 50;
    }
    .boom-overlay.show {
      opacity: 1;
    }
    .boom-emoji {
      font-size: 120px;
      filter: drop-shadow(0 0 30px rgba(248,113,113,0.9));
      animation: boom-pop 0.5s ease-out;
    }
    @keyframes boom-pop {
      0% { transform: scale(0.1) rotate(-20deg); opacity: 0; }
      60% { transform: scale(1.15) rotate(3deg); opacity: 1; }
      100% { transform: scale(1) rotate(0); opacity: 1; }
    }
    .hidden { display: none; }
  </style>
</head>
<body>
  <h1>çµ‚æ¥µå¯†ç¢¼ï¼ˆèªéŸ³ç‰ˆ Demoï¼‰</h1>

  <!-- Boom ç‰¹æ•ˆ -->
  <div id="boom-overlay" class="boom-overlay hidden">
    <div class="boom-emoji">ğŸ’£</div>
  </div>

  <!-- è¨­å®šå€ -->
  <div class="card" id="setup-card">
    <h2 style="font-size:18px; margin:0 0 8px;">éŠæˆ²è¨­å®š</h2>

    <label>
      éŠæˆ²äººæ•¸
      <input type="number" id="player-count" min="1" max="8" value="2" />
    </label>

    <div id="player-names-wrapper"></div>

    <div class="flex">
      <div>
        <label>
          æœ€å°æ•¸å­—
          <input type="number" id="min-number" value="0" />
        </label>
      </div>
      <div>
        <label>
          æœ€å¤§æ•¸å­—
          <input type="number" id="max-number" value="100" />
        </label>
      </div>
    </div>

    <label>
      éŸ³æ•ˆ
      <select id="sound-setting">
        <option value="on">é–‹å•Ÿ</option>
        <option value="off">é—œé–‰</option>
      </select>
    </label>

    <button class="primary" id="start-game-btn">é–‹å§‹éŠæˆ²</button>
    <div class="status" id="setup-status"></div>
  </div>

  <!-- éŠæˆ²å€ -->
  <div class="card hidden" id="game-card">
    <div class="top-row">
      <div>
        <h2 style="font-size:18px; margin:0 0 4px;">éŠæˆ²é€²è¡Œä¸­</h2>
        <div class="range-display">
          ç›®å‰ç¯„åœï¼š<span id="range-text"></span>
        </div>
        <div class="player-display">
          è¼ªåˆ°ï¼š<span id="current-player-name"></span>
        </div>
      </div>
      <div>
        <div class="secret-card" id="secret-card">
          <div class="secret-label">SECRET</div>
          <div class="secret-value hidden" id="secret-value"></div>
          <div class="secret-covered" id="secret-covered">é»æ­¤æŸ¥çœ‹</div>
          <div class="secret-cover-strip"></div>
        </div>
      </div>
    </div>

    <label style="margin-top:10px;">
      ç›®å‰çŒœæ¸¬æ•¸å­—ï¼ˆå¯æ‰‹å‹•æ”¹ï¼‰
      <input type="number" id="guess-input" />
    </label>

    <!-- èªéŸ³æ§åˆ¶ -->
    <div class="voice-status">
      <span class="dot" id="mic-dot"></span>
      <span id="mic-status-text">å°šæœªå•Ÿå‹•éº¥å…‹é¢¨</span>
    </div>
    <button class="secondary" id="toggle-voice-btn">å•Ÿå‹•èªéŸ³è¼¸å…¥</button>
    <div class="error" id="voice-error"></div>

    <div class="transcript-label">èªéŸ³è¾¨è­˜æ–‡å­—ï¼š</div>
    <div class="transcript-box" id="transcript-box"></div>

    <button class="primary" id="confirm-number-btn">é€™å€‹æ•¸å­—ï¼Œç¢ºèªï¼</button>

    <div class="btn-row">
      <button class="secondary" id="new-round-btn">å†ä¾†ä¸€å±€</button>
      <button class="danger" id="restart-btn">é‡æ–°è¨­å®š</button>
    </div>

    <div class="status" id="game-status"></div>
  </div>

  <script>
    // ====== å‹•æ…‹ç©å®¶è¼¸å…¥æ¬„ä½ ======
    const playerCountInput = document.getElementById("player-count");
    const playerNamesWrapper = document.getElementById("player-names-wrapper");

    function renderPlayerInputs() {
      const count = parseInt(playerCountInput.value, 10) || 1;
      playerNamesWrapper.innerHTML = "";
      for (let i = 0; i < count; i++) {
        const label = document.createElement("label");
        label.textContent = "ç©å®¶ " + (i + 1) + " ç¨±å‘¼";
        const input = document.createElement("input");
        input.type = "text";
        input.id = "player-name-" + i;
        input.placeholder = "ä¾‹å¦‚ï¼šLin";
        label.appendChild(document.createElement("br"));
        label.appendChild(input);
        playerNamesWrapper.appendChild(label);
      }
    }
    playerCountInput.addEventListener("change", renderPlayerInputs);
    renderPlayerInputs();

    // ====== éŠæˆ²ç‹€æ…‹ ======
    const setupCard = document.getElementById("setup-card");
    const gameCard = document.getElementById("game-card");
    const setupStatus = document.getElementById("setup-status");
    const gameStatus = document.getElementById("game-status");
    const startGameBtn = document.getElementById("start-game-btn");
    const restartBtn = document.getElementById("restart-btn");
    const newRoundBtn = document.getElementById("new-round-btn");

    const minNumberInput = document.getElementById("min-number");
    const maxNumberInput = document.getElementById("max-number");
    const soundSetting = document.getElementById("sound-setting");

    const rangeText = document.getElementById("range-text");
    const currentPlayerNameEl = document.getElementById("current-player-name");
    const guessInput = document.getElementById("guess-input");

    const secretCard = document.getElementById("secret-card");
    const secretValueEl = document.getElementById("secret-value");
    const secretCoveredEl = document.getElementById("secret-covered");

    const boomOverlay = document.getElementById("boom-overlay");

    let players = [];
    let min = 0;
    let max = 100;
    let secret = 0;
    let currentPlayerIndex = 0;
    let gameOver = false;

    // èªéŸ³ç¢ºèªç‹€æ…‹
    let waitingConfirm = false;
    let pendingNumber = null;
    let numberDetectTimer = null;

    // ====== èªéŸ³åˆæˆï¼ˆæ’­å ±ï¼‰ ======
    function speakText(text) {
      if (!window.speechSynthesis) return;
      if (soundSetting.value === "off") return;
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = "zh-TW";
      window.speechSynthesis.speak(utter);
    }

    // ç°¡å–® beep éŸ³æ•ˆï¼ˆçŒœä¸­æ™‚ï¼‰
    function playBeep() {
      if (soundSetting.value === "off") return;
      if (!window.AudioContext && !window.webkitAudioContext) return;
      const AudioCtx = window.AudioContext || window.webkitAudioContext;
      const ctx = new AudioCtx();
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();
      osc.type = "square";
      osc.frequency.value = 480;
      gain.gain.setValueAtTime(0.001, ctx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.6, ctx.currentTime + 0.02);
      gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.5);
      osc.connect(gain).connect(ctx.destination);
      osc.start();
      osc.stop(ctx.currentTime + 0.5);
    }

    function showBoom() {
      boomOverlay.classList.remove("hidden");
      boomOverlay.classList.add("show");
      // é€£çºŒå¤šæ¬¡ beepï¼Œæå‡çˆ†ç‚¸æ„Ÿ
      playBeep();
      setTimeout(playBeep, 250);
      setTimeout(playBeep, 500);
      // ä¿æŒç‚¸å½ˆé¡¯ç¤ºï¼Œç›´åˆ°ä¸‹ä¸€å±€é‡è¨­
    }

    function hideBoom() {
      boomOverlay.classList.remove("show");
      boomOverlay.classList.add("hidden");
    }

    function updateRangeDisplay() {
      rangeText.textContent = min + " ~ " + max;
    }

    function updateCurrentPlayerDisplay() {
      currentPlayerNameEl.textContent = players[currentPlayerIndex];
    }

    function nextPlayer() {
      currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
      updateCurrentPlayerDisplay();
      speakText("è¼ªåˆ° " + players[currentPlayerIndex] + "ï¼Œè«‹èªªå‡ºä½ çš„æ•¸å­—ã€‚");
    }

    function resetSecretCard() {
      secretCard.classList.remove("revealed");
      secretValueEl.classList.add("hidden");
      secretCoveredEl.textContent = "é»æ­¤æŸ¥çœ‹";
    }

    // åˆå§‹åŒ–å–®ä¸€å±€
    function initRound() {
      secret = Math.floor(Math.random() * (max - min + 1)) + min;
      currentPlayerIndex = 0;
      gameOver = false;
      gameStatus.textContent = "";
      guessInput.value = "";
      updateRangeDisplay();
      updateCurrentPlayerDisplay();
      secretValueEl.textContent = secret;
      resetSecretCard();
      hideBoom();

      // é‡ç½®èªéŸ³ç›¸é—œç‹€æ…‹
      transcriptBox.textContent = "";
      waitingConfirm = false;
      pendingNumber = null;
      if (numberDetectTimer) {
        clearTimeout(numberDetectTimer);
        numberDetectTimer = null;
      }
      if (recognition && recognizing) {
        recognition.stop();
        toggleVoiceBtn.textContent = "å•Ÿå‹•èªéŸ³è¼¸å…¥";
      }

      speakText("æ–°çš„ä¸€å±€é–‹å§‹ã€‚çµ‚æ¥µå¯†ç¢¼åœ¨ " + min + " åˆ° " + max + " ä¹‹é–“ã€‚");
      speakText("é¦–å…ˆç”± " + players[currentPlayerIndex] + " é–‹å§‹ï¼Œè«‹èªªå‡ºä½ çš„æ•¸å­—ã€‚");
    }

    // é–‹å§‹éŠæˆ²
    startGameBtn.addEventListener("click", () => {
      const count = parseInt(playerCountInput.value, 10) || 1;
      const tmpNames = [];
      for (let i = 0; i < count; i++) {
        const input = document.getElementById("player-name-" + i);
        tmpNames.push(input.value.trim() || "ç©å®¶" + (i + 1));
      }
      const minVal = parseInt(minNumberInput.value, 10);
      const maxVal = parseInt(maxNumberInput.value, 10);

      if (isNaN(minVal) || isNaN(maxVal) || minVal >= maxVal) {
        setupStatus.textContent = "è«‹ç¢ºèªæœ€å°/æœ€å¤§æ•¸å­—è¨­å®šæ­£ç¢ºï¼ˆæœ€å° < æœ€å¤§ï¼‰ã€‚";
        return;
      }

      players = tmpNames;
      min = minVal;
      max = maxVal;

      setupStatus.textContent = "";
      setupCard.classList.add("hidden");
      gameCard.classList.remove("hidden");

      initRound();
    });

    // å†ä¾†ä¸€å±€
    newRoundBtn.addEventListener("click", () => {
      if (!players.length) return;
      initRound();
    });

    // é‡æ–°è¨­å®š
    restartBtn.addEventListener("click", () => {
      window.location.reload();
    });

    // çµ‚æ¥µå¯†ç¢¼å¡ç‰Œç¿»ç‰Œ
    secretCard.addEventListener("click", () => {
      const revealed = secretCard.classList.toggle("revealed");
      if (revealed) {
        secretValueEl.classList.remove("hidden");
        secretCoveredEl.textContent = "";
      } else {
        resetSecretCard();
      }
    });

    // ====== èªéŸ³è¾¨è­˜ï¼ˆWeb Speech APIï¼‰ ======
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const toggleVoiceBtn = document.getElementById("toggle-voice-btn");
    const micDot = document.getElementById("mic-dot");
    const micStatusText = document.getElementById("mic-status-text");
    const transcriptBox = document.getElementById("transcript-box");
    const voiceError = document.getElementById("voice-error");

    let recognition = null;
    let recognizing = false;

    if (!SpeechRecognition) {
      toggleVoiceBtn.disabled = true;
      micStatusText.textContent = "æ­¤ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³è¾¨è­˜ï¼Œè«‹æ”¹ç”¨ Chrome / Edgeã€‚";
      voiceError.textContent = "";
    } else {
      recognition = new SpeechRecognition();
      recognition.lang = "zh-TW";
      recognition.continuous = true;
      recognition.interimResults = true;

      recognition.onstart = () => {
        recognizing = true;
        micDot.classList.add("active");
        micStatusText.textContent = "æ­£åœ¨è½ä½ èªªè©±ï¼Œè«‹èªªå‡ºæ•¸å­—ã€‚";
        voiceError.textContent = "";
      };
      recognition.onerror = (event) => {
        voiceError.textContent = "èªéŸ³è¾¨è­˜ç™¼ç”ŸéŒ¯èª¤ï¼š" + event.error;
      };
      recognition.onend = () => {
        recognizing = false;
        micDot.classList.remove("active");
        micStatusText.textContent = "èªéŸ³è¾¨è­˜å·²åœæ­¢ã€‚";
      };
      recognition.onresult = (event) => {
        let finalTranscript = "";
        let interimTranscript = "";
        for (let i = event.resultIndex; i < event.results.length; i++) {
          const result = event.results[i];
          const text = result[0].transcript.trim();
          if (result.isFinal) {
            finalTranscript += text + " ";
          } else {
            interimTranscript += text + " ";
          }
        }
        const textAll = (finalTranscript || interimTranscript).trim();
        if (!textAll) return;
        transcriptBox.textContent = textAll;

        // èªªã€Œç¢ºèªã€æ™‚è™•ç†
       if (waitingConfirm && /ç¢ºèª/.test(textAll)) {
  waitingConfirm = false;
  if (pendingNumber !== null) {
    guessInput.value = pendingNumber;
    speakText("å¥½çš„ï¼Œå·²ç¢ºèª " + pendingNumber + "ã€‚");
    // èªéŸ³ç¢ºèªå¾Œï¼Œè‡ªå‹•ç•¶ä½œæŒ‰ä¸‹ç¢ºèªéˆ•ï¼Œç¹¼çºŒéŠæˆ²
    handleConfirm();
  }
  return;
}

        // å¤šä½æ•¸è™•ç†ï¼šæŠ“é€£çºŒæ•¸å­—ç‰‡æ®µï¼Œå¦‚ 394
        const match = textAll.match(/(\d{1,3})/); // 1~3 ä½æ•¸
        if (!match) return;
        const num = parseInt(match[1], 10);
        if (isNaN(num)) return;

        pendingNumber = num;
        // æ¯æ¬¡åµæ¸¬åˆ°æ•¸å­—å…ˆæ›´æ–°è¼¸å…¥æ¡†
        guessInput.value = num;

        // åœç•™ç´„ 1 ç§’ï¼Œè‹¥æœŸé–“æ²’æœ‰æ–°çš„æ•¸å­—è¦†è“‹ï¼Œæ‰è¤‡èª¦è©¢å•
        if (numberDetectTimer) clearTimeout(numberDetectTimer);
        numberDetectTimer = setTimeout(() => {
          waitingConfirm = true;
          speakText("ä½ å‰›å‰›èªªçš„æ˜¯ " + pendingNumber + " å—ï¼Ÿå¦‚æœæ˜¯ï¼Œè«‹èªªã€Œç¢ºèªã€ã€‚");
        }, 1000);
      };

      toggleVoiceBtn.addEventListener("click", () => {
        if (!recognizing) {
          try {
            recognition.start();
            toggleVoiceBtn.textContent = "åœæ­¢èªéŸ³è¼¸å…¥";
          } catch (e) {}
        } else {
          recognition.stop();
          toggleVoiceBtn.textContent = "å•Ÿå‹•èªéŸ³è¼¸å…¥";
        }
      });
    }

    // ====== ç¢ºèªæ•¸å­—é‚è¼¯ ======
    const confirmBtn = document.getElementById("confirm-number-btn");

function handleConfirm() {
  if (gameOver) return;
  const val = parseInt(guessInput.value, 10);
  if (isNaN(val)) {
    gameStatus.textContent = "è«‹å…ˆè¼¸å…¥æˆ–èªªå‡ºä¸€å€‹æ•¸å­—ã€‚";
    return;
  }
  if (val < min || val > max) {
    gameStatus.textContent = "æ•¸å­—å¿…é ˆåœ¨ç›®å‰ç¯„åœå…§ï¼ˆ" + min + " ~ " + max + "ï¼‰ã€‚";
    speakText("å—¯â€¦â€¦è«‹æŠŠè…¦è¢‹å¸¶å‡ºé–€!é€™å€‹æ•¸å­—è¶…å‡ºç¯„åœï¼Œè«‹å†æƒ³ä¸€å€‹ã€‚");
    return;
  }

  speakText("ä½ ç¢ºå®šæ˜¯ " + val + " å—ï¼Ÿå¥½ï¼Œæˆ‘ä¾†çœ‹çœ‹â€¦â€¦");

  if (val === secret) {
    gameOver = true;
    gameStatus.textContent = "ç©å®¶ã€Œ" + players[currentPlayerIndex] + "ã€èªªä¸­äº†çµ‚æ¥µå¯†ç¢¼ï¼š" + secret + "ï¼";
    speakText("OMGï¼æ²’äº‹æ‰æ€ªï¼Œå°±æ˜¯é€™å€‹æ•¸å­—ï¼" + secret + "ï¼Œä½ é€™å€‹å€’æ¥£é¬¼å¼•çˆ†äº†çµ‚æ¥µå¯†ç¢¼ï¼");
    showBoom();
    if (recognition && recognizing) {
      recognition.stop();
      toggleVoiceBtn.textContent = "å•Ÿå‹•èªéŸ³è¼¸å…¥";
    }
    return;
  }

  if (val < secret) {
    min = val;
    speakText("OMGï¼Œæ²’äº‹æ²’äº‹æš«æ™‚å®‰å…¨ã€‚çµ‚æ¥µå¯†ç¢¼æ¯” " + val + " å¤§ã€‚");
  } else {
    max = val;
    speakText("OMGï¼Œè¶…æ‰¯!è¶…æ‰¯!å·®ä¸€é»å°±çˆ†äº†ã€‚çµ‚æ¥µå¯†ç¢¼æ¯” " + val + " å°ã€‚");
  }
  updateRangeDisplay();

  gameStatus.textContent =
    "ã€Œ" + players[currentPlayerIndex] + "ã€çŒœäº† " + val +
    "ã€‚çµ‚æ¥µå¯†ç¢¼åœ¨ " + min + " åˆ° " + max + " ä¹‹é–“ã€‚";

  nextPlayer();
  guessInput.value = "";
}

confirmBtn.addEventListener("click", handleConfirm);
  </script>
</body>
</html>
